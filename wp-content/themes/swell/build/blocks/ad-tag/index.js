!function(){"use strict";var e={n:function(t){var c=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(c,{a:c}),c},d:function(t,c){for(var l in c)e.o(c,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:c[l]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}};!function(e,t,c){var l=window.wp.i18n,n=window.wp.element,a=window.wp.blocks,r=window.wp.blockEditor,o=window.wp.components,s=window.wp.serverSideRender,i=c.n(s);function u(e,t,c){return t in e?Object.defineProperty(e,t,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[t]=c,e}function p(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,l)}return c}var w=function(e){var t=e.icon,c=e.size,l=void 0===c?24:c,a=function(e,t){if(null==e)return{};var c,l,n=function(e,t){if(null==e)return{};var c,l,n={},a=Object.keys(e);for(l=0;l<a.length;l++)c=a[l],t.indexOf(c)>=0||(n[c]=e[c]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(l=0;l<a.length;l++)c=a[l],t.indexOf(c)>=0||Object.prototype.propertyIsEnumerable.call(e,c)&&(n[c]=e[c])}return n}(e,["icon","size"]);return(0,n.cloneElement)(t,function(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?p(Object(c),!0).forEach((function(t){u(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):p(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}({width:l,height:l},a))},d=window.wp.primitives,b=(0,n.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,n.createElement)(d.Path,{d:"M20.1 5.1L16.9 2 6.2 12.7l-1.3 4.4 4.5-1.3L20.1 5.1zM4 20.8h8v-1.5H4v1.5z"})),m=window.wp.url,v=[{attributes:{adID:{type:"string",default:""}},save:({attributes:e})=>React.createElement("div",null,'[ad_tag id="'+e.adID+'"]')}],f=React.createElement("svg",{viewBox:"0 0 56 56"},React.createElement("polygon",{points:"48,12 48,15 52,15 52,41 48,41 48,44 55,44 55,12 "}),React.createElement("polygon",{points:"8,44 8,41 4,41 4,15 8,15 8,12 1,12 1,44 "}),React.createElement("g",null,React.createElement("path",{d:"M14,24.6c1-1.3,2.8-1.9,5.1-1.9c1.6,0,3,0.3,4.3,1s1.8,1.8,1.8,3.5v6.6c0,0.4,0,1.1,0,1.7c0,0.5,0.1,0.9,0.2,1 c0.1,0.2,0.3,0.3,0.5,0.4v0.7h-4.2c-0.1-0.3-0.2-0.5-0.2-0.9c0-0.2-0.1-0.5-0.1-0.9c-0.5,0.5-1.2,1.1-1.8,1.5 c-0.9,0.4-1.7,0.7-2.8,0.7c-1.3,0-2.3-0.4-3.2-1.2s-1.3-1.8-1.3-3.2c0-1.8,0.6-3.1,2-3.8c0.7-0.4,1.8-0.7,3.3-1l1.3-0.1 c0.7-0.1,1.2-0.2,1.5-0.3c0.5-0.2,0.9-0.6,0.9-1.1c0-0.6-0.2-1-0.6-1.3c-0.4-0.2-1.1-0.3-1.8-0.3c-0.9,0-1.5,0.2-1.9,0.6 c-0.2,0.3-0.4,0.7-0.5,1.3h-3.6C13,26.5,13.3,25.4,14,24.6z M16.8,34.8c0.3,0.3,0.7,0.4,1.3,0.4c0.9,0,1.6-0.2,2.2-0.7 c0.6-0.4,1.1-1.4,1.1-2.7v-1.4c-0.2,0.1-0.5,0.3-0.7,0.3c-0.2,0.1-0.5,0.2-1,0.2l-0.9,0.1c-0.7,0.1-1.4,0.3-1.7,0.5 c-0.5,0.3-0.9,0.9-0.9,1.6C16.3,34.1,16.4,34.5,16.8,34.8z"}),React.createElement("path",{d:"M42.4,18v19.6h-3.7v-2c-0.5,0.9-1.2,1.5-1.8,1.9c-0.6,0.4-1.6,0.5-2.6,0.5c-1.7,0-3.1-0.6-4.3-2c-1.2-1.4-1.7-3.1-1.7-5.2 c0-2.5,0.5-4.4,1.7-5.9c1.2-1.4,2.7-2.1,4.6-2.1c0.9,0,1.7,0.2,2.3,0.5c0.6,0.4,1.3,1,1.7,1.6V18C38.6,18,42.4,18,42.4,18z M32.1,30.5c0,1.4,0.2,2.5,0.7,3.2c0.5,0.9,1.3,1.2,2.3,1.2s1.9-0.4,2.5-1.2c0.5-0.7,0.9-1.8,0.9-3.1c0-1.8-0.4-3.1-1.4-3.8 c-0.5-0.4-1.2-0.6-1.9-0.6c-1.1,0-1.9,0.4-2.5,1.3C32.4,28.1,32.1,29.2,32.1,30.5z"})));const g=[{value:"",label:(0,l.__)("-- バナー型 --","swell")}],E=[{value:"",label:(0,l.__)("-- アフィリエイト型 --","swell")}],h=[{value:"",label:(0,l.__)("-- Amazon型 --","swell")}],R=[{value:"",label:(0,l.__)("-- ランキング型 --","swell")}],y=window.swellAdTags||[];y.forEach((function({id:e,title:t,type:c}){"normal"===c?g.push({value:e,label:t}):"affiliate"===c?E.push({value:e,label:t}):"amazon"===c?h.push({value:e,label:t}):"ranking"===c&&R.push({value:e,label:t})}));const O=(0,n.memo)((({adID:e,setAttributes:t})=>React.createElement("div",{className:"swl-block-selectArea"},React.createElement(o.SelectControl,{value:e,options:g,onChange:e=>{t({adID:e})}}),React.createElement(o.SelectControl,{value:e,options:E,onChange:e=>{t({adID:e})}}),React.createElement(o.SelectControl,{value:e,options:h,onChange:e=>{t({adID:e})}}),React.createElement(o.SelectControl,{value:e,options:R,onChange:e=>{t({adID:e})}})))),_=({isSelected:e,attributes:t,setAttributes:c})=>{const[a,r]=(0,n.useState)(""),[s,i]=(0,n.useState)(y),u=(0,n.useRef)(),p=(0,n.useRef)(),w=a&&a.length>=2&&s.length>0;return(0,n.useEffect)((()=>{i(y),r("")}),[t,e]),React.createElement("div",{className:"swl-block-searchArea"},React.createElement(o.TextControl,{placeholder:(0,l.__)("タイトルで検索…","swell"),value:a,onChange:e=>{r(e),i(y.filter((({title:t})=>t.toLowerCase().includes(e))))},onKeyDown:e=>{w&&null!=u&&u.current&&"Tab"===e.key&&(e.preventDefault(),u.current.querySelector("button").focus())},ref:p}),w&&React.createElement(o.Popover,{ref:u,className:"swl-pop--search",position:"bottom",focusOnMount:!1,onClose:()=>p.current.focus()},React.createElement("div",{className:"swl-pop--search__content"},React.createElement("ul",{className:"swl-pop--search__results"},s.map((({id:e,title:t})=>React.createElement("li",{key:e},React.createElement(o.Button,{isLink:!0,className:"block-editor-url-input__suggestion",onClick:()=>{i(y),r(""),c({adID:String(e)})}},t))))))))};(0,a.registerBlockType)("loos/ad-tag",{title:(0,l.__)("広告タグ","swell"),description:(0,l.__)("登録済みの広告タグを呼び出すことができます。","swell"),icon:f,edit:({attributes:e,setAttributes:t,isSelected:c})=>{const{adID:n}=e,a=(0,r.useBlockProps)({className:"swell-block-ad-tag swl-block-hasPreview"});return React.createElement("div",a,React.createElement(O,{adID:n,setAttributes:t}),React.createElement(_,{isSelected:c,attributes:e,setAttributes:t}),React.createElement("div",{className:"swl-block-previewLabel"},React.createElement("span",null,"Preview"),n&&React.createElement("a",{href:(0,m.addQueryArgs)("post.php",{post:n,action:"edit"}),className:"__editLink",target:"_blank",rel:"noopener noreferrer"},React.createElement(w,{icon:b}),React.createElement("span",null,(0,l.__)("この広告タグを編集する","swell")))),React.createElement("div",{className:"swl-block-previewArea"},n?React.createElement(i(),{block:"loos/ad-tag",attributes:e}):React.createElement("p",null,(0,l.__)("広告タグを選択してください。","swell"))))},save:()=>null,deprecated:v})}(0,0,e)}();